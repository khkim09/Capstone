<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="BlueprintWeapon_8cs" kind="file" language="C#">
    <compoundname>BlueprintWeapon.cs</compoundname>
    <innerclass refid="classBlueprintWeapon" prot="public">BlueprintWeapon</innerclass>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">using<sp/></highlight><highlight class="normal">System.Collections.Generic;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UnityEngine;</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UnityEngine.EventSystems;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="8" refid="classBlueprintWeapon" refkind="compound"><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classBlueprintWeapon" kindref="compound">BlueprintWeapon</ref><sp/>:<sp/>MonoBehaviour,<sp/><ref refid="interfaceIBlueprintPlaceable" kindref="compound">IBlueprintPlaceable</ref></highlight></codeline>
<codeline lineno="9"><highlight class="normal">{</highlight></codeline>
<codeline lineno="11" refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classShipWeaponData" kindref="compound">ShipWeaponData</ref><sp/><ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>;</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection<sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref><sp/>=<sp/>ShipWeaponAttachedDirection.North;</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="22" refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="classBlueprintShip" kindref="compound">BlueprintShip</ref><sp/><ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref>;</highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="27" refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="30" refid="classBlueprintWeapon_1acd72aa52fcd9dd565dd057553d89b957" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1acd72aa52fcd9dd565dd057553d89b957" kindref="member">bpWeaponCost</ref>;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="33" refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" kindref="member">bpWeaponSize</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(2,<sp/>1);</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="38" refid="classBlueprintWeapon_1a3878895909218f0660a1c55bf8fdfab3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Constants.Rotations.Rotation<sp/><ref refid="classBlueprintWeapon_1a3878895909218f0660a1c55bf8fdfab3" kindref="member">bpRotation</ref><sp/>=<sp/>Constants.Rotations.Rotation.Rotation0;</highlight></codeline>
<codeline lineno="39"><highlight class="normal"></highlight></codeline>
<codeline lineno="43" refid="classBlueprintWeapon_1a8b0d312915a96910a0e00ad82c3e30cd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>List&lt;Vector2Int&gt;<sp/><ref refid="classBlueprintWeapon_1a8b0d312915a96910a0e00ad82c3e30cd" kindref="member">occupiedTiles</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="48" refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>SpriteRenderer<sp/><ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref>;</highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight></codeline>
<codeline lineno="53" refid="classBlueprintWeapon_1a1f2289a6be0d9d91f2a87eb63286e9c5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Color<sp/><ref refid="classBlueprintWeapon_1a1f2289a6be0d9d91f2a87eb63286e9c5" kindref="member">validColor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(0f,<sp/>1f,<sp/>0f,<sp/>0.5f);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="58" refid="classBlueprintWeapon_1a3a9ffd20756c6bf122dba503c6a54dc2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Color<sp/><ref refid="classBlueprintWeapon_1a3a9ffd20756c6bf122dba503c6a54dc2" kindref="member">invalidColor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(1f,<sp/>0f,<sp/>0f,<sp/>0.5f);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="classBlueprintWeapon_1ae5e60ab39e50639e1588ee19ab5299b0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintWeapon_1ae5e60ab39e50639e1588ee19ab5299b0" kindref="member">originalPos</ref>;</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="68" refid="classBlueprintWeapon_1afd684539328d797a7ec2c182d5d6aa29" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection<sp/><ref refid="classBlueprintWeapon_1afd684539328d797a7ec2c182d5d6aa29" kindref="member">originalDirection</ref>;</highlight></codeline>
<codeline lineno="69"><highlight class="normal"></highlight></codeline>
<codeline lineno="73" refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="classGridPlacer" kindref="compound">GridPlacer</ref><sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="78" refid="classBlueprintWeapon_1af527d7be9cd3300ecf1d4636e7258fca" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>GameObject<sp/><ref refid="classBlueprintWeapon_1af527d7be9cd3300ecf1d4636e7258fca" kindref="member">mouseDownTarget</ref>;</highlight></codeline>
<codeline lineno="79"><highlight class="normal"></highlight></codeline>
<codeline lineno="84" refid="classBlueprintWeapon_1ac42b284fada4e4003ba51d8e0b2eb7cf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/>[SerializeField]<sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1ac42b284fada4e4003ba51d8e0b2eb7cf" kindref="member">hullLevel</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="classBlueprintWeapon_1a02428af6837f9cd492ccfd830eaec4e7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a02428af6837f9cd492ccfd830eaec4e7" kindref="member">Start</ref>()</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref><sp/>=<sp/>GetComponent&lt;SpriteRenderer&gt;();</highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Sprite<sp/>sprite<sp/>=<sp/><ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref>.sprite;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>width<sp/>=<sp/>sprite.rect.width<sp/>/<sp/>sprite.pixelsPerUnit;</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>height<sp/>=<sp/>sprite.rect.height<sp/>/<sp/>sprite.pixelsPerUnit;</highlight></codeline>
<codeline lineno="96"><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetComponent&lt;BoxCollider2D&gt;().size<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector2(width,<sp/>height);</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>시작<sp/>시<sp/>함선의<sp/>외갑판<sp/>레벨로<sp/>업데이트</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1ab44eb8d7287bbcaa5504a8629a4bbf4f" kindref="member">SetHullLevel</ref>(<ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref>.<ref refid="classBlueprintShip_1af261ef03f43fb9025372b1ff117489e1" kindref="member">GetHullLevel</ref>());</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="110" refid="classBlueprintWeapon_1a67de5752dd1667838d17b66b66e4775c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a67de5752dd1667838d17b66b66e4775c" kindref="member">Update</ref>()</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2<sp/>mouseWorldPos<sp/>=<sp/>Camera.main.ScreenToWorldPoint(Input.mousePosition);</highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RaycastHit2D<sp/>hit<sp/>=<sp/>Physics2D.Raycast(mouseWorldPos,<sp/>Vector2.zero);</highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>회전<sp/>(무기는<sp/>부착<sp/>방향만<sp/>변경)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButtonDown(1))</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>중이면<sp/>회전<sp/>방어<sp/>조건</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeaponDragHandler" kindref="compound">BlueprintWeaponDragHandler</ref>.IsWeaponBeingDragged)</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hit.collider<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>hit.collider.gameObject<sp/>==<sp/>gameObject)</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a3411b4fe11d1cd7ece3801a10fb7f9ff" kindref="member">RotateAttachedDirection</ref>();</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>시작<sp/>(좌클릭)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButtonDown(0))</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(BlockBPMovement())</highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(IsPointerOverBlockingUI())</highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(EventSystem.current.IsPointerOverGameObject())</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1afea0ffe19c13e71f45b6a434d5c050a3" kindref="member">IsPointerOverUIObject</ref>(<ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1ad47fcdd65c51e8358c9eff5f75beb63c" kindref="member">selectionUI</ref>))</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="141"><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1a443092f408ad81ffc678141bc047c0b5" kindref="member">Deselect</ref>();</highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>전<sp/>선택된<sp/>오브젝트<sp/>해제</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1a443092f408ad81ffc678141bc047c0b5" kindref="member">Deselect</ref>();</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>시작<sp/>시<sp/>정보<sp/>저장</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hit.collider<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>hit.collider.gameObject<sp/>==<sp/>gameObject)</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1ae5e60ab39e50639e1588ee19ab5299b0" kindref="member">originalPos</ref><sp/>=<sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1afd684539328d797a7ec2c182d5d6aa29" kindref="member">originalDirection</ref><sp/>=<sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref>;</highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1abd95a28be8d9284dff882e48cb5d75c3" kindref="member">UnMarkObjectOccupied</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1af527d7be9cd3300ecf1d4636e7258fca" kindref="member">mouseDownTarget</ref><sp/>=<sp/>hit.collider.gameObject;</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1af527d7be9cd3300ecf1d4636e7258fca" kindref="member">mouseDownTarget</ref><sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>중</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButton(0))</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(BlockBPMovement())</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2Int<sp/>newPos<sp/>=<sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a170904c40cdc0b03cde40e50b3f23d50" kindref="member">WorldToGridPosition</ref>(mouseWorldPos);</highlight></codeline>
<codeline lineno="174"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref><sp/>=<sp/>newPos;</highlight></codeline>
<codeline lineno="175"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>동일한<sp/>오프셋<sp/>적용</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2Int<sp/>size<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(2,<sp/>1);</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2<sp/>offset<sp/>=<sp/>RoomRotationUtility.GetRotationOffset(size,<sp/>Constants.Rotations.Rotation.Rotation0);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.position<sp/>=<sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a67a8b7577950ee0bbbed35781a1e984b" kindref="member">GetWorldPositionFromGrid</ref>(<ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>)<sp/>+<sp/>(Vector3)offset;</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>bool<sp/>canPlace<sp/>=<sp/>gridPlacer.CanPlaceObject(this,<sp/>bpPosition,<sp/>null);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="182"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>canPlace<sp/>=<sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1aca24a07e1070703d190a127a89613d64" kindref="member">CanPlaceWeapon</ref>(<ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>,<sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref>);</highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/>canPlace<sp/>?<sp/><ref refid="classBlueprintWeapon_1a1f2289a6be0d9d91f2a87eb63286e9c5" kindref="member">validColor</ref><sp/>:<sp/><ref refid="classBlueprintWeapon_1a3a9ffd20756c6bf122dba503c6a54dc2" kindref="member">invalidColor</ref>;</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>종료</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButtonUp(0))</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2Int<sp/>newPos<sp/>=<sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a170904c40cdc0b03cde40e50b3f23d50" kindref="member">WorldToGridPosition</ref>(mouseWorldPos);</highlight></codeline>
<codeline lineno="191"><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a53e6bca1a103cb6165948a33139b2e18" kindref="member">UpdateOccupiedTiles</ref>();</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>canPlace<sp/>=<sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1aca24a07e1070703d190a127a89613d64" kindref="member">CanPlaceWeapon</ref>(<ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>,<sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref>);</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/>Color.white;</highlight></codeline>
<codeline lineno="196"><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>유효성<sp/>검사</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!canPlace)</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>불가능<sp/>:<sp/>원위치</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref><sp/>=<sp/><ref refid="classBlueprintWeapon_1ae5e60ab39e50639e1588ee19ab5299b0" kindref="member">originalPos</ref>;</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref><sp/>=<sp/><ref refid="classBlueprintWeapon_1afd684539328d797a7ec2c182d5d6aa29" kindref="member">originalDirection</ref>;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" kindref="member">bpWeaponSize</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector2Int(2,<sp/>1);</highlight></codeline>
<codeline lineno="204"><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a53e6bca1a103cb6165948a33139b2e18" kindref="member">UpdateOccupiedTiles</ref>();</highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2<sp/>offset<sp/>=</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RoomRotationUtility.GetRotationOffset(<ref refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" kindref="member">bpWeaponSize</ref>,<sp/>Constants.Rotations.Rotation.Rotation0);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.position<sp/>=<sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a67a8b7577950ee0bbbed35781a1e984b" kindref="member">GetWorldPositionFromGrid</ref>(<ref refid="classBlueprintWeapon_1ae5e60ab39e50639e1588ee19ab5299b0" kindref="member">originalPos</ref>)<sp/>+<sp/>(Vector3)offset;</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>점유<sp/>타일<sp/>복구</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a922df24240435582d5d98a30d0f56ccc" kindref="member">MarkObjectOccupied</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1af527d7be9cd3300ecf1d4636e7258fca" kindref="member">mouseDownTarget</ref><sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref><sp/>=<sp/>newPos;</highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8b0d312915a96910a0e00ad82c3e30cd" kindref="member">occupiedTiles</ref><sp/>=<sp/>RoomRotationUtility.GetOccupiedGridPositions(<ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" kindref="member">bpWeaponSize</ref>,<sp/><ref refid="classBlueprintWeapon_1a3878895909218f0660a1c55bf8fdfab3" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a922df24240435582d5d98a30d0f56ccc" kindref="member">MarkObjectOccupied</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.position<sp/>+=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector3(0,<sp/>0,<sp/>10f);<sp/></highlight><highlight class="comment">//<sp/>뒤쪽으로<sp/>배치</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hit.collider<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>hit.collider.gameObject<sp/>==<sp/><ref refid="classBlueprintWeapon_1af527d7be9cd3300ecf1d4636e7258fca" kindref="member">mouseDownTarget</ref>)</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1a455235ae853359d6e6ab683f828acfef" kindref="member">SelectPlaceable</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1af527d7be9cd3300ecf1d4636e7258fca" kindref="member">mouseDownTarget</ref><sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="230"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="231"><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>LateUpdate()</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="236"><highlight class="normal"></highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>BlockBPMovement()</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>RTS<sp/>선택도<sp/>막아야돼서<sp/>통일시켜<sp/>쓰겠음</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GameObject<sp/>blockPanel<sp/>=<sp/>GameObject.FindWithTag(</highlight><highlight class="stringliteral">&quot;BlockRTSNBPMove&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(blockPanel<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>blockPanel.activeInHierarchy)</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="245"><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>IsPointerOverBlockingUI()</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointerEventData<sp/>eventData<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(EventSystem.current);</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eventData.position<sp/>=<sp/>Input.mousePosition;</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;RaycastResult&gt;<sp/>results<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>EventSystem.current.RaycastAll(eventData,<sp/>results);</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(RaycastResult<sp/>result<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>results)</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Scroll<sp/>View&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Essential&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Auxiliary&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Living&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Storage&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Etc&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Weapon&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Hull&quot;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="260"><highlight class="normal"></highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="263"><highlight class="normal"></highlight></codeline>
<codeline lineno="267" refid="classBlueprintWeapon_1a56914dbc72da61c2e31524b9fdabe257" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a56914dbc72da61c2e31524b9fdabe257" kindref="member">Initialize</ref>(<ref refid="classShipWeaponData" kindref="compound">ShipWeaponData</ref><sp/>data,<sp/>Vector2Int<sp/>pos,<sp/>ShipWeaponAttachedDirection<sp/>direction)</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8b0d312915a96910a0e00ad82c3e30cd" kindref="member">occupiedTiles</ref>.Clear();</highlight></codeline>
<codeline lineno="270"><highlight class="normal"></highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref><sp/>=<sp/>data;</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref><sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref><sp/>=<sp/>direction;</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1acd72aa52fcd9dd565dd057553d89b957" kindref="member">bpWeaponCost</ref><sp/>=<sp/>data.<ref refid="classShipWeaponData_1a727fc0357337090258667b2ee1f02d52" kindref="member">cost</ref>;</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" kindref="member">bpWeaponSize</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector2Int(2,<sp/>1);</highlight></codeline>
<codeline lineno="276"><highlight class="normal"></highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8b0d312915a96910a0e00ad82c3e30cd" kindref="member">occupiedTiles</ref><sp/>=<sp/>RoomRotationUtility.GetOccupiedGridPositions(<ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" kindref="member">bpWeaponSize</ref>,<sp/><ref refid="classBlueprintWeapon_1a3878895909218f0660a1c55bf8fdfab3" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="278"><highlight class="normal"></highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref><sp/>=<sp/>GetComponent&lt;SpriteRenderer&gt;();</highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight></codeline>
<codeline lineno="281"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>무기<sp/>데이터에서<sp/>스프라이트<sp/>설정</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="282"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="284"><highlight class="normal"></highlight></codeline>
<codeline lineno="288" refid="classBlueprintWeapon_1a30548e9a4721eee59c3772dc9c5e541b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a30548e9a4721eee59c3772dc9c5e541b" kindref="member">SetDragMode</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref>)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>중일<sp/>때<sp/>반투명하게<sp/>처리</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1aa5da61958579835c1eab2d67726b4fa5" kindref="member">isDragging</ref>)</highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>모드<sp/>활성화<sp/>시<sp/>반투명하게</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Color(<ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref>.color.r,<sp/><ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref>.color.g,<sp/><ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref>.color.b,<sp/>0.5f);</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>모드<sp/>비활성화<sp/>시<sp/>원래<sp/>색상으로</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/>Color.white;</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="301"><highlight class="normal"></highlight></codeline>
<codeline lineno="305" refid="classBlueprintWeapon_1a3411b4fe11d1cd7ece3801a10fb7f9ff" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a3411b4fe11d1cd7ece3801a10fb7f9ff" kindref="member">RotateAttachedDirection</ref>()</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>현재<sp/>attachedDirection<sp/>값을<sp/>기반으로<sp/>다음<sp/>상태로<sp/>전환</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="308"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref>)</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="310"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection.East:</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref><sp/>=<sp/>ShipWeaponAttachedDirection.South;</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection.South:</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref><sp/>=<sp/>ShipWeaponAttachedDirection.North;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection.North:</highlight></codeline>
<codeline lineno="317"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref><sp/>=<sp/>ShipWeaponAttachedDirection.East;</highlight></codeline>
<codeline lineno="318"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>변경된<sp/>attachedDirection에<sp/>따른<sp/>스프라이트<sp/>적용</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="328" refid="classBlueprintWeapon_1a2ec6c613738ecf3ddb977723d5a15713" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">object</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a2ec6c613738ecf3ddb977723d5a15713" kindref="member">GetRotation</ref>()</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref>;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight></codeline>
<codeline lineno="336" refid="classBlueprintWeapon_1a85d791c56437b9f6c2f8abc6209808eb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintWeapon_1a85d791c56437b9f6c2f8abc6209808eb" kindref="member">GetGridPosition</ref>()</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>;</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="340"><highlight class="normal"></highlight></codeline>
<codeline lineno="344" refid="classBlueprintWeapon_1a2d509e6b43b7bbdaa6ed7a85673f1cc1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a2d509e6b43b7bbdaa6ed7a85673f1cc1" kindref="member">SetGridPosition</ref>(Vector2Int<sp/>position)</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref><sp/>=<sp/>position;</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="348"><highlight class="normal"></highlight></codeline>
<codeline lineno="353" refid="classBlueprintWeapon_1a484e24eaf4ebb1994f8c9817dcbb2f6f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a484e24eaf4ebb1994f8c9817dcbb2f6f" kindref="member">SetBlueprint</ref>(<ref refid="classBlueprintShip" kindref="compound">BlueprintShip</ref><sp/>bpShip)</highlight></codeline>
<codeline lineno="354"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref><sp/>=<sp/>bpShip;</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>함선이<sp/>할당되면<sp/>함선의<sp/>현재<sp/>외갑판<sp/>레벨로<sp/>업데이트</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1ab44eb8d7287bbcaa5504a8629a4bbf4f" kindref="member">SetHullLevel</ref>(<ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref>.<ref refid="classBlueprintShip_1af261ef03f43fb9025372b1ff117489e1" kindref="member">GetHullLevel</ref>());</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="362"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="363"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="364"><highlight class="normal"></highlight></codeline>
<codeline lineno="369" refid="classBlueprintWeapon_1ae2c23182c91e59854adf22b4aaac2876" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classBlueprintShip" kindref="compound">BlueprintShip</ref><sp/><ref refid="classBlueprintWeapon_1ae2c23182c91e59854adf22b4aaac2876" kindref="member">GetBlueprintShip</ref>()</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="371"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref>;</highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="373"><highlight class="normal"></highlight></codeline>
<codeline lineno="378" refid="classBlueprintWeapon_1aea22c0e321f64c39c6f6a56d020af717" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1aea22c0e321f64c39c6f6a56d020af717" kindref="member">SetGridPlacer</ref>(<ref refid="classGridPlacer" kindref="compound">GridPlacer</ref><sp/>placer)</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1adb571b9e022ecd976895bb2ec01a332c" kindref="member">gridPlacer</ref><sp/>=<sp/>placer;</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="382"><highlight class="normal"></highlight></codeline>
<codeline lineno="388" refid="classBlueprintWeapon_1afea0ffe19c13e71f45b6a434d5c050a3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1afea0ffe19c13e71f45b6a434d5c050a3" kindref="member">IsPointerOverUIObject</ref>(GameObject<sp/>rootUI)</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointerEventData<sp/>eventData<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(EventSystem.current)<sp/>{<sp/>position<sp/>=<sp/>Input.mousePosition<sp/>};</highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;RaycastResult&gt;<sp/>raycastResults<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>EventSystem.current.RaycastAll(eventData,<sp/>raycastResults);</highlight></codeline>
<codeline lineno="394"><highlight class="normal"></highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(RaycastResult<sp/>result<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>raycastResults)</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(result.gameObject<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>result.gameObject.transform.IsChildOf(rootUI.transform))</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="398"><highlight class="normal"></highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="400"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="401"><highlight class="normal"></highlight></codeline>
<codeline lineno="405" refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>()</highlight></codeline>
<codeline lineno="406"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref><sp/>==<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a9d1cc5ecfde71ff968ddf7b739ba17eb" kindref="member">sr</ref><sp/>=<sp/>GetComponent&lt;SpriteRenderer&gt;();</highlight></codeline>
<codeline lineno="409"><highlight class="normal"></highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>directionIndex<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="411"><highlight class="normal"></highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>방향에<sp/>따른<sp/>인덱스<sp/>설정</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="413"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">switch</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1afe07715ece4a612fcd94bf51ff59f465" kindref="member">bpAttachedDirection</ref>)</highlight></codeline>
<codeline lineno="414"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection.North:</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directionIndex<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection.East:</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directionIndex<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">case</highlight><highlight class="normal"><sp/>ShipWeaponAttachedDirection.South:</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>directionIndex<sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">break</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="425"><highlight class="normal"></highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>함선에서<sp/>외갑판<sp/>레벨<sp/>가져오기<sp/>(캐싱된<sp/>값이<sp/>아닌<sp/>실제<sp/>함선의<sp/>값<sp/>사용)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="427"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>int<sp/>currentHullLevel<sp/>=<sp/>blueprintShip<sp/>!=<sp/>null<sp/>?<sp/>blueprintShip.GetHullLevel()<sp/>:<sp/>hullLevel;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>currentHullLevel<sp/>=<sp/><ref refid="classBlueprintWeapon_1ac42b284fada4e4003ba51d8e0b2eb7cf" kindref="member">hullLevel</ref>;</highlight></codeline>
<codeline lineno="429"><highlight class="normal"></highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>외갑판<sp/>레벨과<sp/>방향에<sp/>맞는<sp/>스프라이트<sp/>적용</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">try</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>.<ref refid="classShipWeaponData_1a5009269e1870870e046676ed08a2816f" kindref="member">flattenedSprites</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>.<ref refid="classShipWeaponData_1a5009269e1870870e046676ed08a2816f" kindref="member">flattenedSprites</ref>[currentHullLevel*3+<sp/>directionIndex]<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.sprite<sp/>=<sp/><ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>.<ref refid="classShipWeaponData_1a5009269e1870870e046676ed08a2816f" kindref="member">flattenedSprites</ref>[currentHullLevel*3+<sp/>directionIndex];</highlight></codeline>
<codeline lineno="437"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="439"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">catch</highlight><highlight class="normal"><sp/>(System.Exception<sp/>ex)</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Debug.LogError($</highlight><highlight class="stringliteral">&quot;무기<sp/>스프라이트<sp/>적용<sp/>중<sp/>오류<sp/>발생:<sp/>{ex.Message}&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="444"><highlight class="normal"></highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>스프라이트가<sp/>없으면<sp/>아이콘으로<sp/>대체</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>.<ref refid="classShipWeaponData_1a56f63799379c96ba15619ddc6c46cc8a" kindref="member">weaponIcon</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)<sp/>sr.sprite<sp/>=<sp/><ref refid="classBlueprintWeapon_1a2dee6763755f0d5d9bcd6c5ade434c94" kindref="member">bpWeaponData</ref>.<ref refid="classShipWeaponData_1a56f63799379c96ba15619ddc6c46cc8a" kindref="member">weaponIcon</ref>;</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight></codeline>
<codeline lineno="452" refid="classBlueprintWeapon_1a2f288f9d2f0a36dbdd27831aa7832aaf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a2f288f9d2f0a36dbdd27831aa7832aaf" kindref="member">GetCost</ref>()</highlight></codeline>
<codeline lineno="453"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="454"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1acd72aa52fcd9dd565dd057553d89b957" kindref="member">bpWeaponCost</ref>;</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="456"><highlight class="normal"></highlight></codeline>
<codeline lineno="461" refid="classBlueprintWeapon_1ab44eb8d7287bbcaa5504a8629a4bbf4f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1ab44eb8d7287bbcaa5504a8629a4bbf4f" kindref="member">SetHullLevel</ref>(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>level)</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(level<sp/>&gt;=<sp/>0<sp/>&amp;&amp;<sp/>level<sp/>&lt;<sp/>3)</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1ac42b284fada4e4003ba51d8e0b2eb7cf" kindref="member">hullLevel</ref><sp/>=<sp/>level;</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1ac42b284fada4e4003ba51d8e0b2eb7cf" kindref="member">hullLevel</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a60094977796de28499b592ef408f5a5b" kindref="member">ApplyAttachedDirectionSprite</ref>();</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="474"><highlight class="normal"></highlight></codeline>
<codeline lineno="481" refid="classBlueprintWeapon_1a0712ed25bae75789be7da28745378fc7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a0712ed25bae75789be7da28745378fc7" kindref="member">GetHullLevel</ref>()</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>?<sp/><ref refid="classBlueprintWeapon_1a2c3134c209281c7977474732ccfb4b04" kindref="member">blueprintShip</ref>.<ref refid="classBlueprintShip_1af261ef03f43fb9025372b1ff117489e1" kindref="member">GetHullLevel</ref>()<sp/>:<sp/><ref refid="classBlueprintWeapon_1ac42b284fada4e4003ba51d8e0b2eb7cf" kindref="member">hullLevel</ref>;</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="485"><highlight class="normal"></highlight></codeline>
<codeline lineno="489" refid="classBlueprintWeapon_1a1abd2016ca769a8578917355f30c5ac0" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>List&lt;Vector2Int&gt;<sp/><ref refid="classBlueprintWeapon_1a1abd2016ca769a8578917355f30c5ac0" kindref="member">GetOccupiedTiles</ref>()</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a8b0d312915a96910a0e00ad82c3e30cd" kindref="member">occupiedTiles</ref>;</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="493"><highlight class="normal"></highlight></codeline>
<codeline lineno="497" refid="classBlueprintWeapon_1a53e6bca1a103cb6165948a33139b2e18" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintWeapon_1a53e6bca1a103cb6165948a33139b2e18" kindref="member">UpdateOccupiedTiles</ref>()</highlight></codeline>
<codeline lineno="498"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintWeapon_1a8b0d312915a96910a0e00ad82c3e30cd" kindref="member">occupiedTiles</ref><sp/>=<sp/>RoomRotationUtility.GetOccupiedGridPositions(<ref refid="classBlueprintWeapon_1a8cfe28579eabea19cdb49d89b8e73078" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintWeapon_1ae4245eac459a4b280550041043626b82" kindref="member">bpWeaponSize</ref>,<sp/><ref refid="classBlueprintWeapon_1a3878895909218f0660a1c55bf8fdfab3" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="501"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="Assets/Scripts/CustomizeShip/Weapon/BlueprintWeapon.cs"/>
  </compounddef>
</doxygen>
