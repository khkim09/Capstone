<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="BlueprintRoom_8cs" kind="file" language="C#">
    <compoundname>BlueprintRoom.cs</compoundname>
    <innerclass refid="classBlueprintRoom" prot="public">BlueprintRoom</innerclass>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="keyword">using<sp/></highlight><highlight class="normal">System.Collections.Generic;</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">TMPro;</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UnityEngine;</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">using<sp/></highlight><highlight class="normal">UnityEngine.EventSystems;</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="9" refid="classBlueprintRoom" refkind="compound"><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classBlueprintRoom" kindref="compound">BlueprintRoom</ref><sp/>:<sp/>MonoBehaviour,<sp/><ref refid="interfaceIBlueprintPlaceable" kindref="compound">IBlueprintPlaceable</ref></highlight></codeline>
<codeline lineno="10"><highlight class="normal">{</highlight></codeline>
<codeline lineno="12" refid="classBlueprintRoom_1af0266eb4ade96baa01af05c4ee797bde" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classRoomData" kindref="compound">RoomData</ref><sp/><ref refid="classBlueprintRoom_1af0266eb4ade96baa01af05c4ee797bde" kindref="member">bpRoomData</ref>;</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="15" refid="classBlueprintRoom_1a3cb43036fb9af681986b6cea42d3ba73" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a3cb43036fb9af681986b6cea42d3ba73" kindref="member">bpLevelIndex</ref>;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="18" refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Constants.Rotations.Rotation<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>;</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="21" refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="26" refid="classBlueprintRoom_1a8835f8643ed1699acf80c8ac4ab9a5ba" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="classBlueprintShip" kindref="compound">BlueprintShip</ref><sp/><ref refid="classBlueprintRoom_1a8835f8643ed1699acf80c8ac4ab9a5ba" kindref="member">blueprintShip</ref>;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="31" refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="34" refid="classBlueprintRoom_1a9e5e54f4f77a6f05288b43f0a31d5e52" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a9e5e54f4f77a6f05288b43f0a31d5e52" kindref="member">bpRoomCost</ref>;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref>;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="42" refid="classBlueprintRoom_1a96f5d60f8c76e5080e91f8aab5333b18" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>List&lt;Vector2Int&gt;<sp/><ref refid="classBlueprintRoom_1a96f5d60f8c76e5080e91f8aab5333b18" kindref="member">occupiedTiles</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="47" refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>SpriteRenderer<sp/><ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref>;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="52" refid="classBlueprintRoom_1a37861bf46b4a2b7927b8b89c5ef223dd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Color<sp/><ref refid="classBlueprintRoom_1a37861bf46b4a2b7927b8b89c5ef223dd" kindref="member">validColor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(0f,<sp/>1f,<sp/>0f,<sp/>0.5f);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="57" refid="classBlueprintRoom_1a2c9012dfafd046402538d4e94fb76d1f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Color<sp/><ref refid="classBlueprintRoom_1a2c9012dfafd046402538d4e94fb76d1f" kindref="member">invalidColor</ref><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(1f,<sp/>0f,<sp/>0f,<sp/>0.5f);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"></highlight></codeline>
<codeline lineno="62" refid="classBlueprintRoom_1a4e16af7321dd0fa36c07badda4f5c628" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintRoom_1a4e16af7321dd0fa36c07badda4f5c628" kindref="member">originalPos</ref>;</highlight></codeline>
<codeline lineno="63"><highlight class="normal"></highlight></codeline>
<codeline lineno="67" refid="classBlueprintRoom_1a887aac1196ed56cfb5f53072fe7ef1cc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>Constants.Rotations.Rotation<sp/><ref refid="classBlueprintRoom_1a887aac1196ed56cfb5f53072fe7ef1cc" kindref="member">originalRot</ref>;</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="72" refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="classGridPlacer" kindref="compound">GridPlacer</ref><sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="77" refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/><ref refid="classRoomData_1_1RoomLevel" kindref="compound">RoomData.RoomLevel</ref><sp/><ref refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" kindref="member">levelData</ref>;</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="82" refid="classBlueprintRoom_1ac4c8577af9c8342caff627a850cac31c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/>GameObject<sp/><ref refid="classBlueprintRoom_1ac4c8577af9c8342caff627a850cac31c" kindref="member">mouseDownTarget</ref>;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight></codeline>
<codeline lineno="87" refid="classBlueprintRoom_1aa265af3ebbb238a57923240f001f2c13" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1aa265af3ebbb238a57923240f001f2c13" kindref="member">Start</ref>()</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref><sp/>=<sp/>GetComponent&lt;SpriteRenderer&gt;();</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Sprite<sp/>sprite<sp/>=<sp/><ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref>.sprite;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>width<sp/>=<sp/>sprite.rect.width<sp/>/<sp/>sprite.pixelsPerUnit;</highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>height<sp/>=<sp/>sprite.rect.height<sp/>/<sp/>sprite.pixelsPerUnit;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GetComponent&lt;BoxCollider2D&gt;().size<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector2(width,<sp/>height);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="classBlueprintRoom_1a53cf733e4494a70c823b5c01eaf4855a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a53cf733e4494a70c823b5c01eaf4855a" kindref="member">Update</ref>()</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2<sp/>mouseWorldPos<sp/>=<sp/>Camera.main.ScreenToWorldPoint(Input.mousePosition);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>RaycastHit2D<sp/>hit<sp/>=<sp/>Physics2D.Raycast(mouseWorldPos,<sp/>Vector2.zero);</highlight></codeline>
<codeline lineno="105"><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>회전</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButtonDown(1))</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>중이면<sp/>회전<sp/>방어<sp/>조건</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoomDragHandler" kindref="compound">BlueprintRoomDragHandler</ref>.IsRoomBeingDragged)</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="112"><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hit.collider<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>hit.collider.gameObject<sp/>==<sp/>gameObject)</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a3a914e9ad1aa6a5dc570a8d639c1da48" kindref="member">Rotate</ref>((Constants.Rotations.Rotation)(((</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref><sp/>+<sp/>1)<sp/>%<sp/>4));</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="116"><highlight class="normal"></highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>시작<sp/>(좌클릭)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!<ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButtonDown(0))</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(BlockBPMovement())</highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>UI<sp/>위에<sp/>마우스가<sp/>있는지<sp/>확인하는<sp/>개선된<sp/>방법</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoom_1a9cf612bf2c48f4a444bed549df9c3c77" kindref="member">IsPointerOverBlockingUI</ref>())</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(EventSystem.current.IsPointerOverGameObject())</highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoom_1acb4c11a6c4712a0516a0059e59886d1b" kindref="member">IsPointerOverUIObject</ref>(<ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1ad47fcdd65c51e8358c9eff5f75beb63c" kindref="member">selectionUI</ref>))</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1a443092f408ad81ffc678141bc047c0b5" kindref="member">Deselect</ref>();</highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>전<sp/>선택된<sp/>방<sp/>해제</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1a443092f408ad81ffc678141bc047c0b5" kindref="member">Deselect</ref>();</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>시작<sp/>시<sp/>정보<sp/>저장</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hit.collider<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>hit.collider.gameObject<sp/>==<sp/>gameObject)</highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a4e16af7321dd0fa36c07badda4f5c628" kindref="member">originalPos</ref><sp/>=<sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>;</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a887aac1196ed56cfb5f53072fe7ef1cc" kindref="member">originalRot</ref><sp/>=<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>;</highlight></codeline>
<codeline lineno="146"><highlight class="normal"></highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1abd95a28be8d9284dff882e48cb5d75c3" kindref="member">UnMarkObjectOccupied</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1ac4c8577af9c8342caff627a850cac31c" kindref="member">mouseDownTarget</ref><sp/>=<sp/>hit.collider.gameObject;</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1ac4c8577af9c8342caff627a850cac31c" kindref="member">mouseDownTarget</ref><sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>중</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButton(0))</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(BlockBPMovement())</highlight></codeline>
<codeline lineno="160"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2Int<sp/>newPos<sp/>=<sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a170904c40cdc0b03cde40e50b3f23d50" kindref="member">WorldToGridPosition</ref>(mouseWorldPos);</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref><sp/>=<sp/>newPos;</highlight></codeline>
<codeline lineno="167"><highlight class="normal"></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2<sp/>offset<sp/>=<sp/>RoomRotationUtility.GetRotationOffset(<ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref>,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.position<sp/>=<sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a67a8b7577950ee0bbbed35781a1e984b" kindref="member">GetWorldPositionFromGrid</ref>(<ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>)<sp/>+<sp/>(Vector3)offset;</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>canPlace<sp/>=<sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a329304b7ca9ec3e50e8e4bf5cd360b8f" kindref="member">CanPlaceRoom</ref>(<ref refid="classBlueprintRoom_1af0266eb4ade96baa01af05c4ee797bde" kindref="member">bpRoomData</ref>,<sp/><ref refid="classBlueprintRoom_1a3cb43036fb9af681986b6cea42d3ba73" kindref="member">bpLevelIndex</ref>,<sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/>canPlace<sp/>?<sp/><ref refid="classBlueprintRoom_1a37861bf46b4a2b7927b8b89c5ef223dd" kindref="member">validColor</ref><sp/>:<sp/><ref refid="classBlueprintRoom_1a2c9012dfafd046402538d4e94fb76d1f" kindref="member">invalidColor</ref>;</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>종료</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>&amp;&amp;<sp/>Input.GetMouseButtonUp(0))</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2Int<sp/>newPos<sp/>=<sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a170904c40cdc0b03cde40e50b3f23d50" kindref="member">WorldToGridPosition</ref>(mouseWorldPos);</highlight></codeline>
<codeline lineno="180"><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a1a2b179b39c57c37cd36f1e2c4fae866" kindref="member">UpdateOccupiedTiles</ref>();</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>canPlace<sp/>=<sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a329304b7ca9ec3e50e8e4bf5cd360b8f" kindref="member">CanPlaceRoom</ref>(<ref refid="classBlueprintRoom_1af0266eb4ade96baa01af05c4ee797bde" kindref="member">bpRoomData</ref>,<sp/><ref refid="classBlueprintRoom_1a3cb43036fb9af681986b6cea42d3ba73" kindref="member">bpLevelIndex</ref>,<sp/>newPos,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="184"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/>Color.white;</highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>유효성<sp/>검사</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!canPlace)</highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>불가능<sp/>:<sp/>원위치</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref><sp/>=<sp/><ref refid="classBlueprintRoom_1a4e16af7321dd0fa36c07badda4f5c628" kindref="member">originalPos</ref>;</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref><sp/>=<sp/><ref refid="classBlueprintRoom_1a887aac1196ed56cfb5f53072fe7ef1cc" kindref="member">originalRot</ref>;</highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref><sp/>=<sp/>RoomRotationUtility.GetRotatedSize(<ref refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" kindref="member">levelData</ref>.size,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a1a2b179b39c57c37cd36f1e2c4fae866" kindref="member">UpdateOccupiedTiles</ref>();</highlight></codeline>
<codeline lineno="195"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>Vector2<sp/>offset<sp/>=<sp/>RoomRotationUtility.GetRotationOffset(<ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref>,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.position<sp/>=<sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a67a8b7577950ee0bbbed35781a1e984b" kindref="member">GetWorldPositionFromGrid</ref>(<ref refid="classBlueprintRoom_1a4e16af7321dd0fa36c07badda4f5c628" kindref="member">originalPos</ref>)<sp/>+<sp/>(Vector3)offset;</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.rotation<sp/>=<sp/>Quaternion.Euler(0,<sp/>0,<sp/>-(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref><sp/>*<sp/>90);</highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>점유<sp/>타일<sp/>복구</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a922df24240435582d5d98a30d0f56ccc" kindref="member">MarkObjectOccupied</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1ac4c8577af9c8342caff627a850cac31c" kindref="member">mouseDownTarget</ref><sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref><sp/>=<sp/>newPos;</highlight></codeline>
<codeline lineno="207"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a96f5d60f8c76e5080e91f8aab5333b18" kindref="member">occupiedTiles</ref><sp/>=<sp/>RoomRotationUtility.GetOccupiedGridPositions(<ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref>,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref>.<ref refid="classGridPlacer_1a922df24240435582d5d98a30d0f56ccc" kindref="member">MarkObjectOccupied</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="210"><highlight class="normal"></highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.position<sp/>+=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Vector3(0,<sp/>0,<sp/>10f);<sp/></highlight><highlight class="comment">//<sp/>뒤쪽으로<sp/>배치</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(hit.collider<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>hit.collider.gameObject<sp/>==<sp/><ref refid="classBlueprintRoom_1ac4c8577af9c8342caff627a850cac31c" kindref="member">mouseDownTarget</ref>)</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classRoomSelectionHandler" kindref="compound">RoomSelectionHandler</ref>.<ref refid="classRoomSelectionHandler_1ac734bdf7cf316d4de6c8e82de589df1d" kindref="member">Instance</ref>.<ref refid="classRoomSelectionHandler_1a25af6afcf09cdd4d4ab2cfacbd96a52d" kindref="member">SelectRoom</ref>(</highlight><highlight class="keyword">this</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1ac4c8577af9c8342caff627a850cac31c" kindref="member">mouseDownTarget</ref><sp/>=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="218"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="219"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>BlockBPMovement()</highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>RTS<sp/>선택도<sp/>막아야돼서<sp/>통일시켜<sp/>쓰겠음</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>GameObject<sp/>blockPanel<sp/>=<sp/>GameObject.FindWithTag(</highlight><highlight class="stringliteral">&quot;BlockRTSNBPMove&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(blockPanel<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>blockPanel.activeInHierarchy)</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="228"><highlight class="normal"></highlight></codeline>
<codeline lineno="233" refid="classBlueprintRoom_1a9cf612bf2c48f4a444bed549df9c3c77" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a9cf612bf2c48f4a444bed549df9c3c77" kindref="member">IsPointerOverBlockingUI</ref>()</highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointerEventData<sp/>eventData<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(EventSystem.current);</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>eventData.position<sp/>=<sp/>Input.mousePosition;</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;RaycastResult&gt;<sp/>results<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>EventSystem.current.RaycastAll(eventData,<sp/>results);</highlight></codeline>
<codeline lineno="239"><highlight class="normal"></highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(RaycastResult<sp/>result<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>results)</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Scroll<sp/>View&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Essential&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Auxiliary&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Living&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Storage&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Etc&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Weapon&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;Hull&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;ControlTab&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;ClearButton&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;SaveButton&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;BPCostText&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;FeedBackText&quot;</highlight><highlight class="normal">)<sp/>||<sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;BackButton&quot;</highlight><highlight class="normal">)<sp/>||</highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result.gameObject.name.Contains(</highlight><highlight class="stringliteral">&quot;RoomButtonPrefab&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>)</highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="252"><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="255"><highlight class="normal"></highlight></codeline>
<codeline lineno="259" refid="classBlueprintRoom_1ae76607d6bcaeffa74b78b54acc1b0128" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1ae76607d6bcaeffa74b78b54acc1b0128" kindref="member">Initialize</ref>(<ref refid="classRoomData" kindref="compound">RoomData</ref><sp/>data,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>level,<sp/>Vector2Int<sp/>pos,<sp/>Constants.Rotations.Rotation<sp/>rot)</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a96f5d60f8c76e5080e91f8aab5333b18" kindref="member">occupiedTiles</ref>.Clear();</highlight></codeline>
<codeline lineno="262"><highlight class="normal"></highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1af0266eb4ade96baa01af05c4ee797bde" kindref="member">bpRoomData</ref><sp/>=<sp/>data;</highlight></codeline>
<codeline lineno="264"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a3cb43036fb9af681986b6cea42d3ba73" kindref="member">bpLevelIndex</ref><sp/>=<sp/>level;</highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref><sp/>=<sp/>pos;</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref><sp/>=<sp/>rot;</highlight></codeline>
<codeline lineno="267"><highlight class="normal"></highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" kindref="member">levelData</ref><sp/>=<sp/>data.<ref refid="classRoomData_1a93ada549c4d197d14917913e944f46c2" kindref="member">GetRoomDataByLevel</ref>(<ref refid="classBlueprintRoom_1a3cb43036fb9af681986b6cea42d3ba73" kindref="member">bpLevelIndex</ref>);</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a9e5e54f4f77a6f05288b43f0a31d5e52" kindref="member">bpRoomCost</ref><sp/>=<sp/><ref refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" kindref="member">levelData</ref>.cost;</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref><sp/>=<sp/><ref refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" kindref="member">levelData</ref>.size;</highlight></codeline>
<codeline lineno="271"><highlight class="normal"></highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref><sp/>=<sp/>RoomRotationUtility.GetRotatedSize(<ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref>,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a96f5d60f8c76e5080e91f8aab5333b18" kindref="member">occupiedTiles</ref><sp/>=<sp/>RoomRotationUtility.GetOccupiedGridPositions(<ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref>,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="274"><highlight class="normal"></highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref><sp/>=<sp/>GetComponent&lt;SpriteRenderer&gt;();</highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.sprite<sp/>=<sp/><ref refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" kindref="member">levelData</ref>.roomSprite;</highlight></codeline>
<codeline lineno="277"><highlight class="normal"></highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.rotation<sp/>=<sp/>Quaternion.Euler(0,<sp/>0,<sp/>-(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref><sp/>*<sp/>90);</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="280"><highlight class="normal"></highlight></codeline>
<codeline lineno="285" refid="classBlueprintRoom_1ad914f1339a8244753a810e356d3a8055" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1ad914f1339a8244753a810e356d3a8055" kindref="member">SetDragMode</ref>(</highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref>)</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>중일<sp/>때<sp/>반투명하게<sp/>처리</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref><sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="classBlueprintRoom_1a110e83a57251b0a1444f02855e3bd72d" kindref="member">isDragging</ref>)</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>모드<sp/>활성화<sp/>시<sp/>반투명하게</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>Color(<ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref>.color.r,<sp/><ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref>.color.g,<sp/><ref refid="classBlueprintRoom_1ab50dd4c636496e9363223c17bf8f5667" kindref="member">sr</ref>.color.b,<sp/>0.5f);</highlight></codeline>
<codeline lineno="293"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>드래그<sp/>모드<sp/>비활성화<sp/>시<sp/>원래<sp/>색상으로</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>sr.color<sp/>=<sp/>Color.white;</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="298"><highlight class="normal"></highlight></codeline>
<codeline lineno="302" refid="classBlueprintRoom_1a3a914e9ad1aa6a5dc570a8d639c1da48" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a3a914e9ad1aa6a5dc570a8d639c1da48" kindref="member">Rotate</ref>(Constants.Rotations.Rotation<sp/>rotation)</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref><sp/>=<sp/>rotation;</highlight></codeline>
<codeline lineno="305"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref><sp/>=<sp/>RoomRotationUtility.GetRotatedSize(<ref refid="classBlueprintRoom_1a4ccbb58c03c528598bbdc218e62f8817" kindref="member">levelData</ref>.size,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="306"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>transform.rotation<sp/>=<sp/>Quaternion.Euler(0,<sp/>0,<sp/>-(</highlight><highlight class="keywordtype">int</highlight><highlight class="normal">)<ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref><sp/>*<sp/>90);</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="308"><highlight class="normal"></highlight></codeline>
<codeline lineno="312" refid="classBlueprintRoom_1a7710c72fe4d997c6b66b007d7a26bd60" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">object</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a7710c72fe4d997c6b66b007d7a26bd60" kindref="member">GetRotation</ref>()</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="314"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>;</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="316"><highlight class="normal"></highlight></codeline>
<codeline lineno="320" refid="classBlueprintRoom_1a72302abb083027c88d5a8253503f49dc" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>Vector2Int<sp/><ref refid="classBlueprintRoom_1a72302abb083027c88d5a8253503f49dc" kindref="member">GetGridPosition</ref>()</highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>;</highlight></codeline>
<codeline lineno="323"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="324"><highlight class="normal"></highlight></codeline>
<codeline lineno="328" refid="classBlueprintRoom_1a6663cc0bf0a8908d7b8c34d881efd9d7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a6663cc0bf0a8908d7b8c34d881efd9d7" kindref="member">SetGridPosition</ref>(Vector2Int<sp/>position)</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref><sp/>=<sp/>position;</highlight></codeline>
<codeline lineno="331"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="332"><highlight class="normal"></highlight></codeline>
<codeline lineno="337" refid="classBlueprintRoom_1a206cee30827d88a027ef567ac9963929" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a206cee30827d88a027ef567ac9963929" kindref="member">SetBlueprint</ref>(<ref refid="classBlueprintShip" kindref="compound">BlueprintShip</ref><sp/>bpShip)</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a8835f8643ed1699acf80c8ac4ab9a5ba" kindref="member">blueprintShip</ref><sp/>=<sp/>bpShip;</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="341"><highlight class="normal"></highlight></codeline>
<codeline lineno="346" refid="classBlueprintRoom_1a48cd7a2d7140cc421d7d19e608c66349" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/><ref refid="classBlueprintShip" kindref="compound">BlueprintShip</ref><sp/><ref refid="classBlueprintRoom_1a48cd7a2d7140cc421d7d19e608c66349" kindref="member">GetBlueprintShip</ref>()</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="348"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a8835f8643ed1699acf80c8ac4ab9a5ba" kindref="member">blueprintShip</ref>;</highlight></codeline>
<codeline lineno="349"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="350"><highlight class="normal"></highlight></codeline>
<codeline lineno="355" refid="classBlueprintRoom_1a5a8b6723ac5f7a9e099dee6c0c795540" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a5a8b6723ac5f7a9e099dee6c0c795540" kindref="member">SetGridPlacer</ref>(<ref refid="classGridPlacer" kindref="compound">GridPlacer</ref><sp/>placer)</highlight></codeline>
<codeline lineno="356"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="357"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a9ab356fbba2f0708f71b0b49b0320621" kindref="member">gridPlacer</ref><sp/>=<sp/>placer;</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="359"><highlight class="normal"></highlight></codeline>
<codeline lineno="365" refid="classBlueprintRoom_1acb4c11a6c4712a0516a0059e59886d1b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">private</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1acb4c11a6c4712a0516a0059e59886d1b" kindref="member">IsPointerOverUIObject</ref>(GameObject<sp/>rootUI)</highlight></codeline>
<codeline lineno="366"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>PointerEventData<sp/>eventData<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">(EventSystem.current)<sp/>{<sp/>position<sp/>=<sp/>Input.mousePosition<sp/>};</highlight></codeline>
<codeline lineno="368"><highlight class="normal"></highlight></codeline>
<codeline lineno="369"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>List&lt;RaycastResult&gt;<sp/>raycastResults<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal">();</highlight></codeline>
<codeline lineno="370"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>EventSystem.current.RaycastAll(eventData,<sp/>raycastResults);</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">foreach</highlight><highlight class="normal"><sp/>(RaycastResult<sp/>result<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>raycastResults)</highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(result.gameObject<sp/>!=<sp/></highlight><highlight class="keyword">null</highlight><highlight class="normal"><sp/>&amp;&amp;<sp/>result.gameObject.transform.IsChildOf(rootUI.transform))</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="375"><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="378"><highlight class="normal"></highlight></codeline>
<codeline lineno="379" refid="classBlueprintRoom_1a995e662b2955c84c1f598f4a81aa4892" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a995e662b2955c84c1f598f4a81aa4892" kindref="member">GetCost</ref>()</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a9e5e54f4f77a6f05288b43f0a31d5e52" kindref="member">bpRoomCost</ref>;</highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="383"><highlight class="normal"></highlight></codeline>
<codeline lineno="388" refid="classBlueprintRoom_1a7e0e187aee44308f619d702050ee3679" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/>List&lt;Vector2Int&gt;<sp/><ref refid="classBlueprintRoom_1a7e0e187aee44308f619d702050ee3679" kindref="member">GetOccupiedTiles</ref>()</highlight></codeline>
<codeline lineno="389"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a96f5d60f8c76e5080e91f8aab5333b18" kindref="member">occupiedTiles</ref>;</highlight></codeline>
<codeline lineno="391"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="392"><highlight class="normal"></highlight></codeline>
<codeline lineno="396" refid="classBlueprintRoom_1a1a2b179b39c57c37cd36f1e2c4fae866" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">public</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classBlueprintRoom_1a1a2b179b39c57c37cd36f1e2c4fae866" kindref="member">UpdateOccupiedTiles</ref>()</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="classBlueprintRoom_1a96f5d60f8c76e5080e91f8aab5333b18" kindref="member">occupiedTiles</ref><sp/>=<sp/>RoomRotationUtility.GetOccupiedGridPositions(<ref refid="classBlueprintRoom_1a6deed6b26e20e780c04054ab8e0bba38" kindref="member">bpPosition</ref>,<sp/><ref refid="classBlueprintRoom_1a1f01db83b6c0800571a7e9edf0bf3cf6" kindref="member">bpRoomSize</ref>,<sp/><ref refid="classBlueprintRoom_1a3094262bc3e6432e1b2ee2244c97e88e" kindref="member">bpRotation</ref>);</highlight></codeline>
<codeline lineno="399"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="400"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="Assets/Scripts/CustomizeShip/Room/BlueprintRoom.cs"/>
  </compounddef>
</doxygen>
